# order-api-server

## Runbook

#### 그레들 스크립트 - local

```
./gradlew clean bootJar
```

#### 그레들 스크립트 - mysql

```
./gradlew clean bootJar -Pprod
```

#### run jar local (h2)

```
java -Dspring.profiles.active=local -jar ./build/libs/order-0.0.1-SNAPSHOT.jar
```

#### run jar prod (mysql)

```
java -Dspring.profiles.active=prod -jar ./build/libs/order-0.0.1-SNAPSHOT.jar
```

### Create TABLE Query

```sql
create table authority
(
    name varchar(255) not null,
    primary key (name)
);

create table authority_user
(
    user_id        bigint       not null,
    authority_name varchar(255) not null,
    primary key (user_id, authority_name)
);

create table refresh_token
(
    user_id       bigint not null,
    refresh_token TEXT   not null,
    primary key (user_id)
);

create table user
(
    id            bigint generated by default as identity,
    email         varchar(255) not null,
    gender        varchar(255),
    name          varchar(255) not null,
    nick_name     varchar(255) not null,
    password_hash varchar(255) not null,
    phone_number  varchar(255) not null,
    primary key (id)
);

create table user_order
(
    order_number varchar(12)  not null,
    name         varchar(255) not null,
    order_date   timestamp    not null,
    user_id      bigint,
    primary key (order_number)
);

alter table authority_user
    add constraint FK8uv4c38vx2syv22r5xcnsefct
        foreign key (authority_name)
            references authority;

alter table authority_user
    add constraint FKhmmb7s813eprjwpks6ujljo3g
        foreign key (user_id)
            references user;

alter table user_order
    add constraint FKj86u1x7csa8yd68ql2y1ibrou
        foreign key (user_id)
            references user;
```

## 기타 정보

- [스웨거 UI](http://localhost:8080/swagger-ui/index.html#/)
